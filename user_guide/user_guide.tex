\documentclass[]{article}
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{hyperref}
\usepackage{scrextend}
\usepackage[skins]{tcolorbox}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage[utf8]{inputenc}
\usepackage{xcolor}
\usepackage{pmboxdraw}
\usepackage{newunicodechar}
\usepackage{amsmath}
\usepackage{siunitx}
\usepackage{tabularx}
\usepackage{amsmath}

\usepackage{fancyhdr}
\renewcommand{\abstractname}{\vspace{-\baselineskip}}

\pagestyle{fancy}
\fancyhf{}
\rhead{$\copyright$ Crown Owned Copyright, Dstl 2020}
\lhead{Riskaware Ltd}
\rfoot{Page \thepage}


\setcounter{tocdepth}{5}
\setcounter{secnumdepth}{5}
\newunicodechar{└}{\textSFii}
\newunicodechar{├}{\textSFviii}
\newunicodechar{─}{\textSFx}

\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\def\code#1{\texttt{#1}}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}

\title{Rapid Indoor Diffusion Tool - User Guide}
\author{James de Lisle}

\def\HS{\hspace{\fontdimen2\font}}

\begin{document}

\maketitle

\abstract{\noindent$\copyright$ Crown Owned Copyright, Dstl 2020. This material is
licensed under the terms of the Open Government Licence except where otherwise
stated. To view this licence, visit
\url{http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3}
or write to the Information Policy Team, The National Archives, Kew, London TW9
4DU, or email: \url{psi@nationalarchives.gsi.gov.uk}}
\tableofcontents

\section{Introduction}

This document describes the usage and features of the Rapid Indoor Diffusion
Tool (RIDT). RIDT is a Python implementation of two different analytical
dispersion models, Eddy Diffusion and Well Mixed. It allows the calculation of
concentrations and exposures based on an arbitrary set of instantaneous,
infinite duration, and fixed duration source terms in a cuboid bounded system.
The Well Mixed model is a set of dimensionless exponential decay equations,
whereas the Eddy Diffusion model is a variant of the standard solution to the 1D
diffusion equation solved with closed boundary conditions, combined in a
separable product in three dimensions. Details regarding the mathematical
definitions the Well Mixed and Eddy Diffusion models can be found in Appendices
\ref{app:wellmixed} and \ref{app:eddydiff} respectively. These models have been
validated against experimental data, within their specified bounds
\cite{foat20}.\\

\noindent This software was developed by Riskaware Ltd. under contract for the UK Defence
Science and Technology Laboratories.\\

\section{Installation}\label{sec:installation}

The following guide is for Windows. However RIDT should function on OSX, and
Linux operating systems.

\begin{enumerate}
    \item Install Python 3.8.x.
    \begin{itemize}
        \item The installer can be found
        \href{https://www.python.org/downloads/release/python-380/}{here}.
        \item Once you have installed it to some location <path>, add both
        <path> and <path>/Scripts to your system path. For instructions of how
        to add things to your system path, please see
        \href{https://docs.alfresco.com/4.2/tasks/fot-addpath.html}{here}.
        \item If you open a Command Prompt or Powershell window and type
        \code{python -V} you should see Python 3.8.x, where x is the subversion
        of Python 3.8 you downloaded.
        \item You should also have access to the Python package manager pip. If
        you run the command \code{pip}, you should see usage instructions appear. 
    \end{itemize}
    \item Install ridt.
    \begin{itemize}
        \item If you have pip installed, you can simply run the command
        \code{pip install ridt} to install the latest version of ridt.
    \end{itemize}
\end{enumerate}
  

\section{Basic Usage}

RIDT is a command line interface tool that ingests a configuration file and
outputs various data to a specified output directory. Assuming you have RIDT
installed on your device as detailed in Section \ref{sec:installation}, entering
the command 
\begin{itemize}
    \item[$\triangleright$] \code{ridt}
\end{itemize}
into the terminal and pressing \code{RETURN} should yield the following console
output:\\

\begin{addmargin}[1.5em]{1em}
\begin{tcolorbox}[enhanced,width=6in,fontupper=\bfseries,drop shadow
southwest,sharp corners, before upper={\parindent15pt}]
\noindent\code{Usage: ridt [OPTIONS] COMMAND [ARGS]...}\\

\indent\code{The rapid indoor diffusion modeling tool (ridt).}\\

\noindent\code{Options:}\\
\indent\code{--help  Show this message and exit.}\\

\noindent\code{Commands:}\\
\indent\code{csv-to-config \HS\HS\HS\HS Merge CSV file to config JSON file.}\\
\indent\code{init\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS Copy a default 
config file to current working directory.}\\
\indent\code{run \HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS Run diffusion model.}
\end{tcolorbox}
\end{addmargin}
\medskip

\noindent We see that there are three sub commands, \code{csv-to-config},
\code{init}, and \code{run}. If we enter the command 

\begin{itemize}
    \item[$\triangleright$] \code{ridt run --help}
\end{itemize}
we get the following console output:\\

\begin{addmargin}[1.5em]{1em}
\begin{tcolorbox}[enhanced,width=6in,fontupper=\bfseries,drop shadow
southwest,sharp corners, before upper={\parindent15pt}]
\noindent\code{Usage: ridt run [OPTIONS] CONFIG\_FILE OUTPUT\_DIR}\\

\indent\code{Run diffusion model.}\\

\noindent\code{Options:}\\
\indent\code{--help  Show this message and exit.}
\end{tcolorbox}
\end{addmargin}
\medskip

\noindent Perhaps unsurprisingly, this is the command used to run RIDT. It takes
two arguments
\begin{itemize}
    \item \code{CONFIG\_FILE}: The path to the configuration file.
    \item \code{OUTPUT\_DIR}: The path the the directory where the data
    generated by RIDT will be written.
\end{itemize}

\noindent A default version of the configuration file can be generated using the
\code{ridt init} command. For example, if we run
\begin{itemize}
    \item[$\triangleright$] \code{ridt init}
\end{itemize}
two files will be created in the current working directory
\begin{itemize}
    \item \code{config.json}: The default RIDT configuration file.
    \item \code{config.jsonc}: A commented version of the default RIDT
    configuration file.
\end{itemize}

\noindent The configuration file, \code{config.json}, is JavaScript Object
Notation (JSON) format. The means it adheres to strict formatting rules. For
detailed information about these rules and the contents of the configuration
file please see Section \ref{sec:configfile}. The file \code{config.jsonc}
contains the same information as \code{config.jsonc}, in addition to comments
comments giving a brief explanation of what each setting does.\\

\noindent We now have everything we need to run RIDT with default settings. To
do so we can run the command 
\begin{itemize}
    \item[$\triangleright$] \code{ridt run config.json .}
\end{itemize}

\noindent where we have provided the path to the configuration file which is in
the current working directory, and the period at the end indicates the output
directory should be the current working directory. If everything runs smoothly
this will result a some information about the current status of the run being
output to the console. Once the run is complete the console will output
\code{Complete.}\\

\noindent After the above command has successfully execute, there will be a set
of new files in the current working directory.

\begin{verbatim}
│   concentration_extrema.txt
│   config.json
│   config.jsonc
│   exposure_extrema.txt
│   run_summary.txt
├───domain
│   ├───concentration
│   │   ├───analysis
│   │   └───data
│   │
│   └───exposure
│       ├───analysis
│       └───data
├───lines
│   ├───concentration
│   │   ├───analysis
│   │   ├───data
│   │   └───plots
│   └───exposure
│       ├───analysis
│       ├───data
│       └───plots
├───planes
│   ├───concentration
│   │   ├───analysis
│   │   ├───data
│   │   └───plots
│   └───exposure
│       ├───analysis
│       ├───data
│       └───plots
└───points
    ├───concentration
    │   ├───analysis
    │   ├───data
    │   └───plots
    └───exposure
        ├───analysis
        ├───data
        └───plots
\end{verbatim}

\noindent where we have only shown the files in the top level directory. In
reality each subdirectory will contain data, images, and analysis corresponding
to the run.\\

\noindent In the top level directory, in our case the current working directory,
there are three new files of note
\begin{itemize}
    \item \code{run\_summary.txt}: A summary of the run configuration.
    \item \code{concentration\_extrema.txt}: A list of extremal values for all
    evaluated concentration quantities.
    \item \code{exposure\_extrema.txt}: A list of extremal values for all
    evaluated exposure quantities.
\end{itemize}

\noindent The file \code{run\_summary.txt} contains a human readable run summary
including some sanity check calculations. The files
\code{concentration\_extrema.txt} and \code{exposure\_extrema.txt} contain
quantites that are computed over all defined geometries. For more information
about what analysis is performed and how it is presented, please see Section
\ref{sec:analysis}.

\section{The RIDT Configuration File}\label{sec:configfile}
\subsection{JSON Format}

The RIDT configuration file is a JSON format document. The basic element of a
JSON document is the empty JSON \emph{object}, \code{\{\}}. Contained within
a JSON object can be one or many of the following types
\begin{itemize}
    \item a string: "encapsulated in double quotes."
    \item a number: floats (1.1123) or integers (23).
    \item an array: [3, 1.1243, "of other types", ["including arrays"]].
    \item a boolean: true or false
    \item null: null
    \item another JSON object: \code{\{\}}
\end{itemize}
Each item contained in a JSON object must have a string identifier, so for
example a JSON object containing one element might be\\
\begin{lstlisting}[language=json,firstnumber=1]
{
    "the_number_one": 1
}
\end{lstlisting}
\medskip
Each \code{string: value} pair must be separated by a comma\\
\begin{lstlisting}[language=json,firstnumber=1]
{
    "the_number_one": 1,
    "dont_forget_the_comma": "never_ever"
}
\end{lstlisting}
\medskip
If the comma is not present an error will occur when programs try and parse the
file. This is the most common form of error you will encounter when using
JSON.\\

\noindent The ability for JSON object to contain other JSON objects makes the
format very flexible and ideal for configuration files. Those people familiar
with the Python programming language will note the similarity between the Python
dictionary data structure.\\

\noindent The standard JSON format does not permit in line comments to be added.
Standard text editor linters will show any text comments as errors. Furthermore
any JSON parser will throw an error if it parses anything other that standard
JSON syntax. As mentioned in the previous section, files with the extension
\code{.jsonc} can contain comments of the form\\
\begin{lstlisting}[language=json, firstnumber=1]
{
    // This is an inline comment in a .jsonc file.
    // It is prepended by a double forward slash.
    "a_normal": "setting"
}
\end{lstlisting}
\medskip

\noindent It is possible that you will need to install the relevant extension in
your text editor if you want to see syntax highlighting in \code{.jsonc} files.
This commented form of JSON will not work as an input file for RIDT,
however it can provide useful annotations for other users, or notes for
yourself. 


\subsection{Settings Summary}
In this section we will provide detailed information about the function of each
setting in the RDIT configuration file. A complete print out of the default
configuration file can be found in Appendix \ref{app:configfile}. We will
provide snippets of the relevant section of the configuration file for each
setting.\\

\noindent Note: any units that are not explicitly defined by a setting are
assumed to be SI units.

\subsubsection{\code{ridt\_version}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "v1.0"
    \end{itemize}
\end{itemize}
This string indicates the version of ridt that the config file corresponds to.

\subsubsection{\code{eddy\_diffusion}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} RIDT will evaluate the Eddy Diffusion model (Section
\ref{app:eddydiff}) with the parameters and over the domains defined in
the configuration file, otherwise the model will not be evaluated.

\subsubsection{\code{well\_mixed}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} RIDT will evaluate the Well Mixed model (Section
\ref{app:wellmixed}) with the parameters and over the domains defined in the
configuration file, otherwise the model will not be evaluated.

\subsubsection{\code{compute\_exposure}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} RIDT will compute, plot, and analyse the exposure.

\subsubsection{\code{write\_data\_to\_csv}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} RIDT will write all computed data to csv files.

\subsubsection{\code{integration\_method}}\label{sec:integrationmethod}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "cumulativetrapezoidal"
        \item[$\rightarrow$] "romberg"
    \end{itemize}
\end{itemize}
This string determines which method of integration to use when evaluating the
eddy diffusion model. When Romberg is selected, every point in time will be
integrated from zero, to a high degree of precision. When Cumulative Trapezoidal
is selected, a cumulative integral is performed over all time points evaluated.
Use Romberg when you want to evaluate a small number of time points to a high
degree of precision.


\subsubsection{\code{concentration\_units}}\label{sec:concentrationunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "kg.m-3"
        \item[$\rightarrow$] "kg.kg-1"
        \item[$\rightarrow$] "mg.m-3"
        \item[$\rightarrow$] "ppm"
        \item[$\rightarrow$] "ppb"
        \item[$\rightarrow$] "ppt"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs
concentration quantities. During the execution of RIDT all calculations are done
using SI units, however it can ingest and output concentration values using any
of the above selections.\\

\noindent The conversion from ppm, ppb, and ppt to kg.m-3 are given by
\begin{equation}
    \left[\text{kg.m-3}\right] = \left[\text{ppx}\right]\frac{\left(\text{molecular weight}\right)
    \times \left(\text{pressure}\right)}{\left(\text{temperature}\right) \times \left(\text{factor}\right)}
\end{equation}

\noindent where $\text{factor} \in \left\{10^{6}, 10^{9}, 10^{12}\right\}$.

\subsubsection{\code{exposure\_units}}\label{sec:exposureunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "mg.min.m-3"
        \item[$\rightarrow$] "kg.s.m-3"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs
exposure quantities. During the execution of RIDT all calculations are done
using SI units, however it can ingest and output exposure values using any
of the above selections.

\subsubsection{\code{mass\_units}}\label{sec:massunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "kg"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs mass
quantities. During the execution of RIDT all calculations are done using SI
units, however it can ingest and output mass values using any of the above
selections. [Note: more options might be available in later versions.]

\subsubsection{\code{time\_units}}\label{sec:timeunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "s"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs time
quantities. During the execution of RIDT all calculations are done using SI
units, however it can ingest and output time values using any of the above
selections. [Note: more options might be available in later versions.]

\subsubsection{\code{time\_samples}}\label{sec:timesamples}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq1$
    \end{itemize}
\end{itemize}
This integer determines the discretisation of the temporal domain of the
simulation. The times at which the models are evaluated are an evenly spaced
discretisation of order \code{time\_samples} between zero and \code{total\_time}
(Section \ref{sec:totaltime}), inclusive. When using cumulative trapezoidal
integration (Section \ref{sec:integrationmethod}) the larger the number of time
samples the more precise the integration will be. Regardless of the type of
integration chosen, the exposure is computed using cumulative trapezoidal
integration over the time domain. Therefore the precision of the exposure is
dependent on the number of time samples (the more samples, the more precise the
computed exposure).

\subsubsection{\code{total\_time}}\label{sec:totaltime}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq1.0$
    \end{itemize}
\end{itemize}
This float determines the upper bound of the temporal domain of the simulation.
Its units are defined by the \code{time\_units} setting (Section
\ref{sec:timeunits}).

\subsubsection{\code{spatial\_units}}\label{sec:spatialunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "m"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs spatial
quantities. During the execution of RIDT all calculations are done using SI
units, however it can ingest and output spatial values using any of the above
selections. [Note: more options might be available in later versions.]

\subsubsection{\code{dimensions}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which determine the spatial bounds of the
simulation.

\paragraph{\code{dimensions.x}}\label{sec:dimx}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$
    \end{itemize}
\end{itemize}
This float defines the upper spatial bound (inclusive) along the x-axis. The
lower bound is always 0.0. The units of this quantity are defined by the
\code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{dimensions.y}}\label{sec:dimy}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$
    \end{itemize}
\end{itemize}
This float defines the upper spatial bound (inclusive) along the y-axis. The
lower bound is always 0.0. The units of this quantity are defined by the
\code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{dimensions.z}}\label{sec:dimz}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$
    \end{itemize}
\end{itemize}
This float defines the upper spatial bound (inclusive) along the z-axis. The
lower bound is always 0.0. The units of this quantity are defined by the
\code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\subsubsection{\code{spatial\_samples}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which determine the spatial discretisation of the
simulation.

\paragraph{\code{spatial\_samples.x}}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq2$
    \end{itemize}
\end{itemize}
This integer determines the discretisation of the x-axis of the simulation. The
locations at which the models are evaluated are an evenly spaced discretisation
of order \code{spatial\_samples.x} between zero and \code{dimensions.x} (Section
\ref{sec:dimx}), inclusive.


\paragraph{\code{spatial\_samples.y}}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq2$
    \end{itemize}
\end{itemize}
This integer determines the discretisation of the y-axis of the simulation. The
locations at which the models are evaluated are an evenly spaced discretisation
of order \code{spatial\_samples.y} between zero and \code{dimensions.y} (Section
\ref{sec:dimy}), inclusive.

\paragraph{\code{spatial\_samples.z}}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq2$
    \end{itemize}
\end{itemize}
This integer determines the discretisation of the z-axis of the simulation. The
locations at which the models are evaluated are an evenly spaced discretisation
of order \code{spatial\_samples.z} between zero and \code{dimensions.z} (Section
\ref{sec:dimz}), inclusive.

\subsubsection{\code{fresh\_air\_flow\_rate\_units}}\label{sec:freshairchangerateunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "m3.s-1"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs the
fresh air change rate. During the execution of RIDT all calculations are done
using SI units, however it can ingest and output the fresh air change rate using
any of the above selections. [Note: more options might be available in later
versions.]

\subsubsection{\code{fresh\_air\_flow\_rate}}\label{sec:freshairchangerate}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>=0.0$
    \end{itemize}
\end{itemize}
This setting determines the value of the fresh air change rate.

\subsubsection{\code{physical\_properties}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which determine the physical quantities that are
needed in the calculation of some quantities (Section \ref{sec:analysis})

\paragraph{\code{agent\_molecular\_weight\_units}}\label{sec:agentmolweightunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "mol.m-3"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs the
agent molecular weight. During the execution of RIDT all calculations are done
using SI units, however it can ingest and output the agent molecular weight
using any of the above selections. [Note: more options might be available in
later versions.]

\paragraph{\code{agent\_molecular\_weight}}\label{sec:agentmolweight}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$ 
    \end{itemize}
\end{itemize}
This float determines the value of agent molecular weight.

\paragraph{\code{pressure\_units}}\label{sec:pressureunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "mol.m-3"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs the
pressure. During the execution of RIDT all calculations are done using SI units,
however it can ingest and output pressure values using any of the above
selections. [Note: more options might be available in later versions.]

\paragraph{\code{pressure}}\label{sec:pressure}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$ 
    \end{itemize}
\end{itemize}
This float determines the value of the pressure of the atmosphere.

\paragraph{\code{temperature\_units}}\label{sec:temperatureunits}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "mol.m-3"
    \end{itemize}
\end{itemize}
This string determines the units in which the program ingests and outputs the
temperature. During the execution of RIDT all calculations are done using SI units,
however it can ingest and output temperature values using any of the above
selections. [Note: more options might be available in later versions.]

\paragraph{\code{temperature}}\label{sec:temperature}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$ 
    \end{itemize}
\end{itemize}
This float determines the value of the temperature of the atmosphere.

\subsubsection{\code{modes}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define the source terms to be used in the
evaluation of the models.

\subsubsection{\code{instantaneous}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define the instantaneous source terms to be
used in the evaluation of the models.

\paragraph{\code{instantaneous.sources}}\label{sec:instsources}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains definitions of each instantaneous source (Section
\ref{sec:instsource}) to be evaluated during the run. It contains items which
are themselves JSON objects. This setting is different from other settings in
that an arbitrary number of sources can be defined. The only restriction is they
must all have different string identifiers. For example\\
\begin{lstlisting}[language=json,firstnumber=1]
"instantaneous": {
    "sources":{
        "my_source": {...},
        "your_source": {...},
        "everyones_source": {...}
    }
}
\end{lstlisting}
\medskip

\noindent If you want to remove all sources of this type, delete all entries
contained within the \code{"sources": \{\}} object.

\paragraph{\code{instantaneous.sources.source}}\label{sec:instsource}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define a single instantaneous source term to
be used in the evaluation of the models. Many such sources can be defined in a
single configuration file in the \code{instantanous.sources} setting (Section
\ref{sec:instsources}).

\paragraph{\code{instantaneous.sources.source.x}}\label{sec:instsourcex}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the x-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{instantaneous.sources.source.y}}\label{sec:instsourcey}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the y-ayis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{instantaneous.sources.source.z}}\label{sec:instsourcez}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the z-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{instantaneous.sources.source.mass}}\label{sec:instsourcemass}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float determines the release mass of the source. The units of this quantity
are defined by the \code{mass\_units} setting (Section
\ref{sec:massunits}).

\paragraph{\code{instantaneous.sources.source.time}}\label{sec:instsourcetime}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float determines the release time of the source. It must lie within the
temporal bounds of the simulation. The units of this quantity are defined by the
\code{time\_units} setting (Section \ref{sec:timeunits}).

\subsubsection{\code{fixed\_duration}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define the fixed\_duration source terms to be
used in the evaluation of the models.

\paragraph{\code{fixed\_duration.sources}}\label{sec:fixsources}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains definitions of each fixed\_duration source (Section
\ref{sec:fixsource}) to be evaluated during the run. It contains items which
are themselves JSON objects. This setting is different from other settings in
that an arbitrary number of sources can be defined. The only restriction is they
must all have different string identifiers. For example\\
\begin{lstlisting}[language=json,firstnumber=1]
"fixed_duration": {
    "sources":{
        "my_source": {...},
        "your_source": {...},
        "everyones_source": {...}
    }
}
\end{lstlisting}
\medskip

\noindent If you want to remove all sources of this type, delete all entries
contained within the \code{"sources": \{\}} object.

\paragraph{\code{fixed\_duration.sources.source}}\label{sec:fixsource}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define a single fixed\_duration source term to
be used in the evaluation of the models. Many such sources can be defined in a
single configuration file in the \code{instantaneous.sources} setting (Section
\ref{sec:fixsources}).

\paragraph{\code{fixed\_duration.sources.source.x}}\label{sec:fixsourcex}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the x-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{fixed\_duration.sources.source.y}}\label{sec:fixsourcey}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the y-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{fixed\_duration.sources.source.z}}\label{sec:fixsourcez}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the z-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{fixed\_duration.sources.source.rate}}\label{sec:fixsourcerate}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float determines the release rate of the source. The units of this quantity
are SI (kg.s-1).

\paragraph{\code{fixed\_duration.sources.source.time}}\label{sec:fixsourcetime}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float determines the release time of the source. It must lie within the
temporal bounds of the simulation. The units of this quantity are defined by the
\code{time\_units} setting (Section \ref{sec:timeunits}).

\subsubsection{\code{infinite\_duration}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define the infinite\_duration source terms to be
used in the evaluation of the models.

\paragraph{\code{infinite\_duration.sources}}\label{sec:infsources}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains definitions of each infinite\_duration source (Section
\ref{sec:infsource}) to be evaluated during the run. It contains items which
are themselves JSON objects. This setting is different from other settings in
that an arbitrary number of sources can be defined. The only restriction is they
must all have different string identifiers. For example\\
\begin{lstlisting}[language=json,firstnumber=1]
"infinite_duration": {
    "sources":{
        "my_source": {...},
        "your_source": {...},
        "everyones_source": {...}
    }
}
\end{lstlisting}
\medskip

\noindent If you want to remove all sources of this type, delete all entries
contained within the \code{"sources": \{\}} object.

\paragraph{\code{infinite\_duration.sources.source}}\label{sec:infsource}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define a single infinite\_duration source term to
be used in the evaluation of the models. Many such sources can be defined in a
single configuration file in the \code{instantanous.sources} setting (Section
\ref{sec:infsources}).

\paragraph{\code{infinite\_duration.sources.source.x}}\label{sec:infsourcex}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the x-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{infinite\_duration.sources.source.y}}\label{sec:infsourcey}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the y-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{infinite\_duration.sources.source.z}}\label{sec:infsourcez}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the source along the z-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{infinite\_duration.sources.source.rate}}\label{sec:infsourcerate}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float determines the release rate of the source. The units of this quantity
are SI (kg.s-1).

\paragraph{\code{infinite\_duration.sources.source.start\_time}}\label{sec:infsourcestarttime}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float determines the time the source's release starts. It must lie within
the temporal bounds of the simulation. The start time must be before the end
time. The units of this quantity are defined by the \code{time\_units} setting
(Section \ref{sec:timeunits}).


\paragraph{\code{infinite\_duration.sources.source.end\_time}}\label{sec:infsourceendtime}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float determines the time the source's release ends. It must lie within
the temporal bounds of the simulation. The end time must be after the start 
time. The units of this quantity are defined by the \code{time\_units} setting
(Section \ref{sec:timeunits}).

\subsubsection{\code{thresholds}}

\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which specify any threshold values which will be
used during the analysis phase of RIDT. 

\paragraph{\code{thresholds.concentration}}\label{sec:concentrationthresholds}
\begin{itemize}
    \item[$\diamond$] type: [float] 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$
    \end{itemize}
\end{itemize}
This setting is an array of float values that define the concentration
thresholds that are used in the analysis phase of RIDT. The units of these
quantities are defined by the \code{concentration\_units} setting (Section
\ref{sec:concentrationunits}). An example:\\
\begin{lstlisting}[language=json,firstnumber=1]
"concentration": [
    1e-10,
    1e-5,
    1e-2,
    1e-1,
    1.0
]
\end{lstlisting}

\paragraph{\code{thresholds.exposure}}\label{sec:exposurethresholds}
\begin{itemize}
    \item[$\diamond$] type: [float] 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$
    \end{itemize}
\end{itemize}
This setting is an array of float values that define the exposure
thresholds that are used in the analysis phase of RIDT. The units of these
quantities are defined by the \code{exposure\_units} setting (Section
\ref{sec:exposureunits}). An example:\\
\begin{lstlisting}[language=json,firstnumber=1]
"exposure": [
    1e-10,
    1e-5,
    1e-2,
    1e-1,
    1.0
]
\end{lstlisting}

\subsubsection{\code{models}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which determine many model specific settings.

\subsubsection{\code{models.eddy\_diffusion}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings that control the way the Eddy Diffusion model is
evaluated.

\subsubsection{\code{models.eddy\_diffusion.coefficient}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains settings pertaining to the selection of the means
of computing the eddy diffusion coefficient.

\paragraph{\code{coefficient.calculation}}\label{sec:coeffcalc}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "TKEB"
        \item[$\rightarrow$] "EXPLICIT"
    \end{itemize}
\end{itemize}
This string determines which which method is used to calculate the eddy
diffusion coefficient. If "TKEB" is selected then the coefficient is computed
from the TKEB equation (Section \ref{app:tkeb}). If "EXPLICIT" is selected 
the value used in the \code{coefficient.value} setting
(Section \ref{sec:coeffvalue}).


\paragraph{\code{coefficient.value}}\label{sec:coeffvalue}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.001$
    \end{itemize}
\end{itemize}
This float is the value used for the eddy diffusion coefficient if the
\code{coefficient.calculation} setting is set to
"EXPLICIT" (Section \ref{sec:coeffcalc}).

\subsubsection{\code{coefficient.tkeb}}\label{sec:coefftkeb}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains settings pertaining to the calculation of the TKEB
coefficient.

\paragraph{\code{coefficient.tkeb.bound}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "lower"
        \item[$\rightarrow$] "regression"
        \item[$\rightarrow$] "upper"
    \end{itemize}
\end{itemize}
This string determines which which bound of the TKEB coefficient is used
(Section \ref{app:tkeb}).

\paragraph{\code{coefficient.tkeb.total\_air\_flow\_rate}}
\begin{itemize}
    \item[$\diamond$] type: float
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0.0$
    \end{itemize}
\end{itemize}
This float that specifies the value of the total air change rate to use the in
calculation of the TKEB coefficient (Section \ref{app:tkeb}).

\paragraph{\code{coefficient.tkeb.number\_of\_supply\_vents}}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq 1$
    \end{itemize}
\end{itemize}
This integer determines the value of the number of supply vents to use the in
calculation of the TKEB coefficient (Section \ref{app:tkeb}).

\subsubsection{\code{models.eddy\_diffusion.images}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains settings pertaining to number of images sources
used in the evaluation of the Eddy Diffusion model (Section \ref{app:eddydiff}).

\paragraph{\code{images.mode}}\label{sec:imagemode}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "auto"
        \item[$\rightarrow$] "manual"
    \end{itemize}
\end{itemize}
This string determines the method by which images sources are added to the
calculation. If "manual" is chosen the value assigned to the
\code{images.quantity} setting  is used (Section
\ref{sec:imagequant}). If "auto" is chosen then the geometric variance is used
to determine the corrective degree of a new image source (Section
\ref{app:eddydiff}). The geometric variance is given by
\begin{equation}
    \text{exp}\left[\overline{\left(\text{ln}~C_{\text{old}}-\text{ln}~C_{\text{new}}\right)^{2}}\right]
\end{equation}
Where $C_{\text{old}}$ and $C_{\text{old}}$ are the tensors containing all
concentrations at a given time over a given domain, before and after adding
another image source.


\paragraph{\code{images.quantity}}\label{sec:imagequant}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq 0$
    \end{itemize}
\end{itemize}
This integer determines the number if image sources to add during the evaluation
of the Eddy Diffusion model. It is used if the
\code{images.mode} setting has been set to "manual"
(Section \ref{sec:imagemode}) (Section \ref{app:eddydiff}).


\subsubsection{\code{models.eddy\_diffusion.analysis}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains settings pertaining to the analysis performed on
the data after the models have been evaluated.

\paragraph{\code{analysis.perform\_analysis}}\label{sec:percex}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} this boolean will mean the analysis is performed. If \code{false}
no analysis is performed.

\paragraph{\code{analysis.percentage\_exceedance}}\label{sec:percex}
\begin{itemize}
    \item[$\diamond$] type: float
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $0.0\leq cdot\leq 100.0$
    \end{itemize}
\end{itemize}
This float defines the percentage used to calculate the time to a domain
percentage exceedance of a given threshold. Please see Section
\ref{sec:analysis} for more information.

\paragraph{\code{analysis.exclude\_uncertain\_values}}\label{sec:excludevalue}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} this boolean will mean no values within $2m$ of a source term
will be included in the post run analysis. This is because within $2m$ of any
source term the Eddy Diffusion model is unphysical.

\subsubsection{\code{models.eddy\_diffusion.monitor\_locations}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains settings pertaining to the spatial domains, or
geometries, over which to compute the Eddy Diffusion model.

\subsubsection{\code{monitor\_locations.evaluate}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains other boolean settings that switch on or off the
evaluation of certain domain geometries classes.

\paragraph{\code{monitor\_locations.evaluate.points}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} this boolean will mean all point monitor locations defined in the
\code{monitor\_locations.points} setting (Section \ref{sec:monpoints}) will be
evaluated by the model.

\paragraph{\code{monitor\_locations.evaluate.lines}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} this boolean will mean all line monitor locations defined in the
\code{monitor\_locations.lines} setting (Section \ref{sec:monlines}) will be
evaluated by the model.

\paragraph{\code{monitor\_locations.evaluate.planes}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} this boolean will mean all plane monitor locations defined in the
\code{monitor\_locations.planes} setting (Section \ref{sec:monplanes}) will be
evaluated by the model.

\paragraph{\code{monitor\_locations.evaluate.domain}}
\begin{itemize}
    \item[$\diamond$] type: boolean
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If \code{true} this boolean will mean the full domain  will be evaluated by the
model. 


\subsubsection{\code{monitor\_locations.points}}\label{sec:monpoints}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains all point-like monitor locations that are to be
evaluated by the eddy diffusion model. It contains items which
are themselves JSON objects. This setting is different from other settings in
that an arbitrary number of points can be defined. The only restriction is they
must all have different string identifiers. For example\\
\begin{lstlisting}[language=json,firstnumber=1]
"monitor_locations": {
    "points":{
        "my_point": {...},
        "your_point": {...},
        "everyones_point": {...}
    }
}
\end{lstlisting}
\medskip

\noindent If you want to remove all monitor locations of this type, delete all
entries contained within the \code{"points": \{\}} object.

\subsubsection{\code{monitor\_locations.points.point}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define a point in space at which to evaluate
the Eddy Diffusion model. Many such points can be defined in a
single configuration file in the \code{monitor\_locations.points} setting (Section
\ref{sec:monpoints}).

\paragraph{\code{monitor\_locations.points.point.x}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the point along the x-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{monitor\_locations.points.point.y}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the point along the y-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\paragraph{\code{monitor\_locations.points.point.z}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of the point along the z-axis. It must lie
within the spatial bounds of the simulation. The units of this quantity are
defined by the \code{spatial\_units} setting (Section \ref{sec:spatialunits}).

\subsubsection{\code{monitor\_locations.lines}}\label{sec:monlines}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains all line-like monitor locations that are to be
evaluated by the eddy diffusion model. It contains items which
are themselves JSON objects. This setting is different from other settings in
that an arbitrary number of lines can be defined. The only restriction is they
must all have different string identifiers. For example\\
\begin{lstlisting}[language=json,firstnumber=1]
"monitor_locations": {
    "lines":{
        "my_line": {...},
        "your_line": {...},
        "everyones_line": {...}
    }
}
\end{lstlisting}
\medskip

\noindent If you want to remove all monitor locations of this type, delete all
entries contained within the \code{"lines": \{\}} object.

\subsubsection{\code{monitor\_locations.lines.line}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define a line in space at which to evaluate
the Eddy Diffusion model. Many such lines can be defined in a single
configuration file in the \code{monitor\_locations.lines} setting (Section
\ref{sec:monlines}).

\subsubsection{\code{monitor\_locations.lines.line.point}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define the point in space through which the
line passes.

\paragraph{\code{monitor\_locations.lines.line.point.x}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of this line intercept point along the x-axis. It
must lie within the spatial bounds of the simulation. The units of this quantity
are defined by the \code{spatial\_units} setting (Section
\ref{sec:spatialunits}).

\paragraph{\code{monitor\_locations.lines.line.point.y}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of this line intercept point along the y-ayis. It
must lie within the spatial bounds of the simulation. The units of this quantity
are defined by the \code{spatial\_units} setting (Section
\ref{sec:spatialunits}).

\paragraph{\code{monitor\_locations.lines.line.point.z}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float defines the position of this line intercept point along the z-azis. It
must lie within the spatial bounds of the simulation. The units of this quantity
are defined by the \code{spatial\_units} setting (Section
\ref{sec:spatialunits}).


\paragraph{\code{monitor\_locations.lines.line.parallel\_axis}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "x"
        \item[$\rightarrow$] "y"
        \item[$\rightarrow$] "z"
    \end{itemize}
\end{itemize}
This string determines which axis lies parallel to this line.

\subsubsection{\code{monitor\_locations.planes}}\label{sec:monplanes}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains all plane-like monitor locations that are to be
evaluated by the eddy diffusion model. It contains items which
are themselves JSON objects. This setting is different from other settings in
that an arbitrary number of planes can be defined. The only restriction is they
must all have different string identifiers. For example\\
\begin{lstlisting}[language=json,firstnumber=1]
"monitor_locations": {
    "planes":{
        "my_plane": {...},
        "your_plane": {...},
        "everyones_plane": {...}
    }
}
\end{lstlisting}
\medskip

\noindent If you want to remove all monitor locations of this type, delete all
entries contained within the \code{"planes": \{\}} object.

\subsubsection{\code{monitor\_locations.planes.plane}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define a plane in space at which to evaluate
the Eddy Diffusion model. Many such planes can be defined in a single
configuration file in the \code{monitor\_locations.planes} setting (Section
\ref{sec:monplanes}).

\paragraph{\code{monitor\_locations.planes.plane.axis}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "xy"
        \item[$\rightarrow$] "yz"
        \item[$\rightarrow$] "xz"
    \end{itemize}
\end{itemize}
This string determines which axes lie parallel to this plane.

\paragraph{\code{monitor\_locations.planes.plane.distance}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$ 
    \end{itemize}
\end{itemize}
This float defines the position of this plane intercept point along the
perpendicular axis. It must lie within the spatial bounds of the simulation. The
units of this quantity are defined by the \code{spatial\_units} setting (Section
\ref{sec:spatialunits}).

\subsubsection{\code{monitor\_locations.domain}}\label{sec:mondomain}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This settings object contains information about the full computational domain.
It contains items which are themselves JSON objects. This setting is different
from other settings in that an arbitrary number of full domains can be defined.
The only restriction is they must all have different string identifiers. For
example\\
\begin{lstlisting}[language=json,firstnumber=1]
"instantaneous": {
    "sources":{
        "my_domain": {...},
        "your_domain": {...},
        "everyones_domain": {...}
    }
}
\end{lstlisting}
However, given the fact that the two domains would evaluate the same
information, it is currently only necessary to have a single entry in this
object.


\subsubsection{\code{monitor\_locations.domain.domain}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which define a plane in space at which to evaluate
the Eddy Diffusion model. Many such full domain can be defined in a single
configuration file in the \code{monitor\_locations.domain} setting (Section
\ref{sec:monfull domain}), however there is currently only need for one entry.


\paragraph{\code{monitor\_locations.domain.domain.domain}}
\begin{itemize}
    \item[$\diamond$] type: bool 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
This is a placeholder value and currently serves no purpose. It must however be
defined. It does not matter if it is true or false.

\subsubsection{\code{models.eddy\_diffusion.points\_plots}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which control in what manner plots of point-like
monitor locations are produced for each run. 

\paragraph{\code{points\_plots.output}}
\begin{itemize}
    \item[$\diamond$] type: bool 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If this boolean is \code{true} then the specified line plots of the data
associated with any point-like monitor locations (Section \ref{sec:monpoints})
are produced. This also include the Well Mixed model's outputs (which is
point-like in nature). If this boolean is \code{false} then no plots of this
type are generated.

\paragraph{\code{points\_plots.scale}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "linear"
        \item[$\rightarrow$] "logarithmic"
    \end{itemize}
\end{itemize}
This string determines the type of scale to use for the dependent variable, e.g.
concentration, in the plots of point-like monitor locations.

\paragraph{\code{points\_plots.time\_axis\_units}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "s"
        \item[$\rightarrow$] "m"
        \item[$\rightarrow$] "h"
    \end{itemize}
\end{itemize}
This string determines the units of the time axis.

\subsubsection{\code{models.eddy\_diffusion.lines\_plots}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which control in what manner and how many graph
plots of line-like monitor locations are produced for each run. 

\paragraph{\code{lines\_plots.output}}
\begin{itemize}
    \item[$\diamond$] type: bool 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If this boolean is \code{true} then the specified line plots of the data
associated with any line-like monitor locations (Section \ref{sec:monlines}) are
produced.  If this boolean is \code{false} then no plots of this type are
generated.

\paragraph{\code{lines\_plots.scale}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "linear"
        \item[$\rightarrow$] "logarithmic"
    \end{itemize}
\end{itemize}
This string determines the type of scale to use for the dependent variable, e.g.
concentration, in the plots of line-like monitor locations.

\paragraph{\code{lines\_plots.animate}}
\begin{itemize}
    \item[$\diamond$] type: bool 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
This is a placeholder setting with no current function. Animations of plots as
a function of time might be added in a later version.


\paragraph{\code{lines\_plots.number}}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0$
    \end{itemize}
\end{itemize}
This integer determines the number of plots over the time domain to produce for
every line-like monitor location (Section \ref{sec:monlines}). It cannot be
larger than the \code{time\_samples} setting (Section \ref{sec:timesamples}).
This will attempt to evenly space the plots over the time domain, based on the
number of time samples.


\subsubsection{\code{models.eddy\_diffusion.planes\_plots}}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which control in what manner and how many contour 
plots of plane-like monitor locations are produced for each run. 

\paragraph{\code{planes\_plots.output}}
\begin{itemize}
    \item[$\diamond$] type: bool 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
If this boolean is \code{true} then the specified plane plots of the data
associated with any plane-like monitor locations (Section \ref{sec:monplanes}) are
produced.  If this boolean is \code{false} then no plots of this type are
generated.

\paragraph{\code{planes\_plots.scale}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "linear"
        \item[$\rightarrow$] "logarithmic"
    \end{itemize}
\end{itemize}
This string determines the type of scale to use for contours.

\paragraph{\code{planes\_plots.animate}}
\begin{itemize}
    \item[$\diamond$] type: bool 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] true
        \item[$\rightarrow$] false
    \end{itemize}
\end{itemize}
This is a placeholder setting with no current function. Animations of plots as
a function of time might be added in a later version.

\paragraph{\code{planes\_plots.number}}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $>0$
    \end{itemize}
\end{itemize}
This integer determines the number of plots over the time domain to produce for
every plane-like monitor location (Section \ref{sec:monplanes}). It cannot be
larger than the \code{time\_samples} setting (Section \ref{sec:timesamples}).
This will attempt to evenly space the plots over the time domain, based on the
number of time samples.

\paragraph{\code{planes\_plots.range}}
\begin{itemize}
    \item[$\diamond$] type: string 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] "auto"
        \item[$\rightarrow$] "manual"
    \end{itemize}
\end{itemize}
If this string is "auto" the the maximum and minimal contours will be
automatically computed from the data. This will be done over the whole time
domain for a given monitor location, so all separate time correlated plots have
the same contour range for better comparison. If this string is "manual" the the
minimum and maximum contours defined using the values in the
\code{planes\_plots.number\_of\_contours} setting
(Section \ref{sec:numcontour}).

\paragraph{\code{planes\_plots.number\_of\_contours}}\label{sec:numcontour}
\begin{itemize}
    \item[$\diamond$] type: integer 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq2$
    \end{itemize}
\end{itemize}
This integer determines the number of contours used in the contour plots. The
actual values for the contours a computed relative to a maximum and minimum
value (either computed from the data of given explicitly) and the type of scale
selected.

\paragraph{\code{planes\_plots.contours}}\label{sec:numcontour}
\begin{itemize}
    \item[$\diamond$] type: JSON Object 
\end{itemize}
This object contains settings which control the maximum and minimum contour
values.

\subparagraph{\code{planes\_plots.contours.min}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float is the value used for the manually defined minimum contour. It must
be less than the maximum value provided.

\subparagraph{\code{planes\_plots.contours.max}}
\begin{itemize}
    \item[$\diamond$] type: float 
    \item[$\diamond$] allowed values:
    \begin{itemize}
        \item[$\rightarrow$] $\geq0.0$
    \end{itemize}
\end{itemize}
This float is the value used for the manually defined maximum contour. It must
be greater than the minimum value provided.

\section{Batch Mode}
RIDT has the ability to perform batch runs of any numerical quantity. To perform
a batch run, we must define a quantity in the configuration file as a range.
For example, take this instantaneous source\\
\begin{lstlisting}[language=json,firstnumber=1]
"source_1": {
    "x": 10.0,
    "y": 3.0,
    "z": 1.0,
    "mass": 1.0,
    "time": 0.0
}
\end{lstlisting}
\medskip
We wish to evaluate the same source with varying release masses. There are two
ways that ranges can be defined in a configuration file. The first is to define
an explicit array of values\\
\begin{lstlisting}[language=json,firstnumber=1]
"source_1": {
    "x": 10.0,
    "y": 3.0,
    "z": 1.0,
    "mass": {
        "array": [1.0, 1.1, 1.2, 1.3]
    },
    "time": 0.0
}
\end{lstlisting}
\medskip
All of the values in the array must adhere to any bounding restrictions of the
quantity in question. The ordering or numerical spacing of values is not
restricted. The second way we can achieve the same thing is by defining an
implicit range\\
\begin{lstlisting}[language=json,firstnumber=1]
"source_1": {
    "x": 10.0,
    "y": 3.0,
    "z": 1.0,
    "mass": {
        "min": 1.0,
        "max": 1.3,
        "num": 4
    },
    "time": 0.0
}
\end{lstlisting}
\medskip
where in the range values will be evenly spaced between the minimum and maximum
values, inclusively.\\

\noindent It is possible to define more than one range in a single file. If 
this is done then the Cartesian product of all ranges is evaluated by RIDT. For
example if three ranges are defined, one with 5 values, one with 7 values, and
one with 10 values, then RIDT will evaluate the model $5\times7\times10=350$
times with all possible combinations of parameters.\\

\noindent If it is desirable that two ranges are evaluated in step, such that they are
combined along the same `axis', then they can be coupled using a "match"
parameter. For example, we wish to vary the release mass of this source, but
also vary the $x$ position of the source for each mass value. To do so we provide
a suplementary parameter "match" in the range definition.\\
\begin{lstlisting}[language=json,firstnumber=1]
"source_1": {
    "x": {
        "array": [10.0, 11.0, 12.0, 13.0],
        "match": "some_match_id"
    },
    "y": 3.0,
    "z": 1.0,
    "mass": {
        "min": 1.0,
        "max": 1.3,
        "num": 4,
        "match": "some_match_id"
    },
    "time": 0.0
}
\end{lstlisting}
\medskip
We set the "match" id string to "some\_match\_id", but it doesn't matter what the
provided "match" string is, as long as the two ranges have the same match
string. If we run this file, RIDT will be evaluated 4 times, where each run uses
the $i$th element of each range. You can couple an arbitrary number of ranges
with the same match parameter, and an arbitrary number of match parameters can
be defined. If the length of the ranges with the same match parameter vary, then
the ranges are only evaluated up to the length of the shortest range. A warning
will be provided at runtime should matched ranges have different lengths.\\

\noindent When computing the Cartesian product of the ranges to construct the
computational space for the run, matched ranges form a single axis of the
Cartesian space. For example if we also wish to evaluate a varying $y$ position
for all values in our matched range, we can provide a range for the $y$
parameter\\
\begin{lstlisting}[language=json,firstnumber=1]
"source_1": {
    "x": {
        "array": [10.0, 11.0, 12.0, 13.0],
        "match": "some_match_id"
    },
    "y": {
        "array": [3.0, 4.0],
    },
    "z": 1.0,
    "mass": {
        "min": 1.0,
        "max": 1.3,
        "num": 4,
        "match": "some_match_id"
    },
    "time": 0.0
}
\end{lstlisting}
\medskip
In this case we have two matched ranges and a third range. If the two ranges
were not matched then the computational space would be of size
$4\times4\times2=32$. However because they are matched, the computational space 
is of size $4\times2=8$.\\

\noindent When in batch mode, the output directory will contain a number of indexed
subdirectories that correspond to the position in computational space that the
contained files correspond to. For example, if we defined two ranges in our
configuration file both of length $2$, then the computational space would be of
dimension $2\times2$. The corresponding output directory structure would be
\begin{verbatim}
│   batch_concentration_extrema.txt
│   batch_config.json
│   batch_exposure_extrema.txt
│   batch_run_summary.txt
├───[0, 0]
│   ├───domain
│   │   ├───concentration
│   │   │   ├───analysis
│   │   │   └───data
│   │   └───exposure
│   │       ├───analysis
│   │       └───data
│   ├───lines
│   │   ├───concentration
│   │   │   ├───analysis
│   │   │   ├───data
│   │   │   └───plots
│   │   └───exposure
│   │       ├───analysis
│   │       ├───data
│   │       └───plots
│   ├───planes
│   │   ├───concentration
│   │   │   ├───analysis
│   │   │   ├───data
│   │   │   └───plots
│   │   └───exposure
│   │       ├───analysis
│   │       ├───data
│   │       └───plots
│   └───points
│       ├───concentration
│       │   ├───analysis
│       │   ├───data
│       │   └───plots
│       └───exposure
│           ├───analysis
│           ├───data
│           └───plots
├───[0, 1]
├───[1, 0]
└───[1, 1]
\end{verbatim}
where each [i, j] subdirectory contains the run config file, data, plots, and
analysis for each point in the batch computational space. The file
\code{batch\_run\_summary.txt} contains a summary of the batch run information,
including the computational space itself.

\section{\code{csv-to-config}}
RIDT provides the ability to easily add large numbers or source terms and
monitor locations to a configuration file. For example, if we want to add ten
point monitor locations to our configuration file each with a different $x$
position, we can use the \code{csv-to-config} command. If we enter the command
\begin{itemize}
    \item[$\triangleright$] \code{ridt csv-to-config --help}
\end{itemize}
the console will display\\
\begin{addmargin}[1.5em]{1em}

\begin{tcolorbox}[enhanced,width=6in,fontupper=\bfseries,drop shadow
southwest,sharp corners, before upper={\parindent15pt}]
\noindent\code{Usage: ridt csv-to-config [OPTIONS] CONFIG\_FILE CSV\_FILE}\\

\indent\code{Merge CSV file to config JSON file.}\\

\noindent\code{Options:}\\
\indent\code{-o, --output\_file PATH}\\
\indent\code{--force / --no-force}\\
\indent\code{--help\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS\HS Show this message and exit.}
\end{tcolorbox}
\end{addmargin}
\medskip

\noindent As indicated it takes two arguments, the path to an existing
configuration file \code{CONFIG\_FILE}, and the path to a CSV file
\code{CSV\_FILE}. The \code{CONFIG\_FILE} must be a valid RIDT configuration
file. There is an option \code{--ouput} that takes a \code{PATH} argument that
can be provided if you wish to produce a new configuration file with the new
entries, leaving the old file intact. The CSV file must only contain entries of
the following form

\begin{center}
    \begin{tabular}{|c|c|c|c|c|c|c|}\hline
        INS & float & float & float & float & float & \\\hline
        INF & float & float & float & float & float & \\\hline
        FIX & float & float & float & float & float & float \\\hline
        POI & float & float & float &  &  & \\\hline
        LIN & float & float & float & string &  & \\\hline
        PLA & string & float &  &  &  & \\\hline
    \end{tabular}
\end{center}

\noindent where float and string indicate the data type. Each prefix string in the first
column corresponds to a different item in the configuration file
\begin{itemize}
    \item INS: Instantaneous source. These are the ordered correspondence
    between the subsequent values and the source parameters:
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|c|}\hline
            INS & float & float & float & float & float & \\\hline
            Prefix & $x$ & $y$ & $z$ & mass & time & \\\hline
        \end{tabular}
    \end{center}
    \item INF: Infinite duration source. These are the ordered correspondence
    between the subsequent values and the source parameters:
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|c|}\hline
            INS & float & float & float & float & float & \\\hline
            Prefix & $x$ & $y$ & $z$ & rate & time & \\\hline
        \end{tabular}
    \end{center}
    \item FIX: Fixed duration source. These are the ordered correspondence
    between the subsequent values and the source parameters:
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|c|}\hline
            FIX & float & float & float & float & float & float \\\hline
            Prefix & $x$ & $y$ & $z$ & rate & star time & end time\\\hline
        \end{tabular}
    \end{center}
    \item POI: Point monitor location. These are the ordered correspondence
    between the subsequent values and the source parameters:
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|c|}\hline
            POI & float & float & float &  &  & \\\hline
            Prefix & $x$ & $y$ & $z$ & & & \\\hline
        \end{tabular}
    \end{center}
    \item LIN: Line monitor location. These are the ordered correspondence
    between the subsequent values and the source parameters:
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|c|}\hline
            LIN & float & float & float & string &  & \\\hline
            Prefix & intercept-$x$ & intercept-$y$ & intercept-$z$ & parallel axis & & \\\hline
        \end{tabular}
    \end{center}
    \item PLA: Plane monitor location. These are the ordered correspondence
    between the subsequent values and the source parameters:
    \begin{center}
        \begin{tabular}{|c|c|c|c|c|c|c|}\hline
            PLA & string & float &  &  &  & \\\hline
            Prefix & parallel axes & position on perpendicular axis&  &  &  & \\\hline
        \end{tabular}
    \end{center}
\end{itemize}

For more details on the allowed values for each entry, please see the relevant
sections in this document.\\

\noindent If we want to add ten instantaneous sources that release the same mass
at 1s intervals, the CSV file will contain
\begin{center}
    \begin{tabular}{|c|c|c|c|c|c|c|}\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 1.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 2.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 3.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 4.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 5.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 6.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 7.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 8.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 9.0 & \\\hline
        INS & 1.0 & 2.0 & 3.0 & 1.0 & 10.0 & \\\hline
    \end{tabular}
\end{center}

\noindent When we run the command
\begin{itemize}
    \item[$\triangleright$] \code{ridt csv-to-config config.json new.csv}
\end{itemize}

\noindent where \code{new.csv} contains the information described in the table above, and
\code{config.json} is our existing configuration file. Assuming the
configuration file has no existing instantaneous sources defined, after
executing the command above, the following instantaneous sources will be defined

\begin{lstlisting}[language=json,firstnumber=1]
"sources": {
        "source_0": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 1.0
        },
        "source_1": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 2.0
        },
        "source_2": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 3.0
        },
        "source_3": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 4.0
        },
        "source_4": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 5.0
        },
        "source_5": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 6.0
        },
        "source_6": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 7.0
        },
        "source_7": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 8.0
        },
        "source_8": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 9.0
        },
        "source_9": {
            "x": 1.0,
            "y": 2.0,
            "z": 3.0,
            "mass": 1.0,
            "time": 10.0
        }
    }
},
\end{lstlisting}
where the sources have been automatically numbered from 0 to 9. Any existing
items with an identifier that is the same as one that is automatically generated
will be overwritten. \\

\noindent Any combination of different prefixes and entries can be in a single
CSV file. RIDT will parse and add them to their respective section of the
configuration file.

\section{Run Analysis}\label{sec:analysis}
The following analysis is performed on each run for every monitor location
defined in the configuration file, that was marked for evaluation, for both
concentration and exposure data. The data is output in CSV files in the run
directory, \code{<monitor\_location>/<quantity>/analysis/} where
\code{<monitor\_location>} is either, points, lines, planes or domains, and
\code{<analysis>} is either concentration or exposure.\\

If specified in the configuration file (Section \ref{sec:excludevalues}), points
within 2m of any source term will be excluded from the calculation.

\subsection{Maxium Values}
The maximum value achieved during the course of the run. The time, location, and
value are povided. These values can be found in\\

\code{<monitor\_location>\_maximums.csv}. \\

If specified in the configuration file (Section \ref{sec:excludevalues}), points
within 2m of any source term will be excluded from the calculation.

\subsection{Time to Threshold Values}
For all thresholds defined in the configuration file, the time during the
simulation that the threshold was reached, and the location where it happened.
These values can be found in \\

\code{<monitor\_location>\_exceeds\_<threshold>.csv}.\\

If multiple points in space reach the threshold at the same time, only one will
be returned (The first in the enumerated cartesian product space).\\

If specified in the configuration file (Section \ref{sec:excludevalues}), points
within 2m of any source term will be excluded from the calculation.

\subsection{Time for Percent of Domain to Threshold Values}
For all thresholds defined in the configuration file, the time during the
simulation that the threshold was reached for a percentage of the domain. That
percentage is specified in the
\code{percentage\_exceedance} setting (Section
\ref{sec:percex}). These values can be found in\\

\code{<percentage>\%\_of\_<monitor\_location>\_exceeds\_<threshold>.csv} 

\subsection{Maximum Percent of Domain to Exceed Threshold Values}
For all thresholds defined in the configuration file the maximum percentage of
the domain that exceeds the threshold, over the entire course of the run. These
values can be found in\\

\code{<monitor\_location>\_max\%\_exceeds\_<threshold>.csv} \\

If specified in the configuration file (Section \ref{sec:excludevalues}), points
within 2m of any source term will be excluded from the calculation.\\

\subsection{Extrema}
\noindent For each run, a file \code{*\_extrema.txt} is saved to the output directory that
contains information about the maximal (or minimal) values over each type of
monitor location for the above quantities. For example if more that one monitor
point is defined, the \code{*\_extrema.txt} will indicate which point recorded
the maximum value over the entire run. For each threshold, which point reached
each threshold the fastest, and so on for the other quantities. This is done
separately for all types of monitor locations, including the full domain, as
long as they have been marked for evaluation in the configuration file.

\subsection{Batch Run Analysis}
In the case of a batch run, all of the above analysis is performed and output,
if specified, for each point in computational space and saved in the
corresponding indexed run directory. In addition, files of the form
\code{batch\_*\_extrema.txt} are saved in the parent directory containing
maximal values of the analysis quantities over the entire computational space.
They are of the same structure as the extrema summaries for an individual run,
except they also provide the computational space index, e.g. (i, j) from our
example above, to indicate which point in computational space the extremal value
ocurred.



\appendix
\section{The Full Default Configuration File}\label{app:configfile}
In this section we provide the full default configuration file, as created when
the command \code{ridt init} is invoked.

\input{config.tex}

\section{The Well Mixed Model}\label{app:wellmixed}




\subsection{Instantaneous release}\label{sec:WMInst}

Equation for concentration, $C(t)$ [\SI{}{\kilo\gram\per\meter\cubed}], in a
well-mixed room from an instantaneous release of material with a mass, $M$
[\SI{}{\kilo\gram}].
\begin{eqnarray}\label{eq:WMInst}
	C(t) = \frac{M}{V} \exp\left(-\lambda_f\:t\right),
\end{eqnarray}
where $V$ [m] is the room volume, $\lambda_f$ [\SI{}{\per\hour}] is the fresh
air change rate and $t$ [s] is the time. $\lambda_f$ is given $\frac{Q_f}{V}$,
where $Q_f$ [\SI{}{\meter\cubed\per\second}] is the flow rate of fresh air into
the room.
\subsection{Constant and continuous release}\label{sec:WMCont}

Equation for concentration in a well-mixed from a constant and continuous
release \cite{keil09}
\begin{eqnarray}\label{eq:WMCont}
	C(t) = \frac{S}{Q_f} \left[1 - \exp\left( -\lambda_f\:t\right) \right],
\end{eqnarray}
where $S$ [\SI{}{\kilo\gram\per\second}] is the release rate. 

\subsection{Constant release rate with finite duration}\label{sec:WMFinite}

Equation for concentration in a well-mixed from a constant release rate with a
finite duration.
\begin{equation}\label{eq:WMFinite}
	C(t) = 
	\begin{cases} 
		C(t) = \frac{S}{Q_f} \left[1 - \exp\left( -\lambda_f\:t\right) \right]								& (t \leq t_{end}) \\
		C(t) = C_{t_{end}} \exp\left[-\lambda_f\:(t - t_{end})\right]											& (t > t_{end}),
	\end{cases} 
\end{equation}
where $t_{end}$ [s] is the duration of the release, when the release starts at
$t$ = 0.

\section{Eddy Diffusion Model}\label{app:eddydiff}

\subsection{Instantaneous release}\label{app:EddyInst}

The equation for concentration resulting from an instantaneous point release in
a cuboid bounded space \cite{drivas96}.
\begin{eqnarray}\label{eq:cuboid-decay-inst}
	C(t) = \frac{M\: \exp(-\lambda_f\:t)}{8(\pi\:D_e\:t)^{\frac{3}{2}}} r_{x}(t)
	r_{y}(t) r_{z}(t)
\end{eqnarray}

where $D_e$ [\SI{}{\meter\squared\per\second}] is the eddy diffusion
coefficient, the terms $r_{x}(t)$, $r_{y}(t)$ and $r_{z}(t)$ are given by the
following:
\begin{eqnarray}
	r_{x}(t) = \sum^{\infty}_{n = -\infty} \left[\exp\left(\frac{-(x + 2nL -
	x_{0})^{2}}{4D_e\:t}\right) + \exp\left(\frac{-(x + 2nL +
	x_{0})^{2}}{4D_e\:t}\right)\right]
\end{eqnarray}

\begin{eqnarray}
	r_{y}(t) = \sum^{\infty}_{n = -\infty} \left[\exp\left(\frac{-(y + 2nW-
	y_{0})^{2}}{4D_e\:t}\right) + \exp\left(\frac{-(y + 2nW +
	y_{0})^{2}}{4D_e\:t}\right)\right]
\end{eqnarray}

\begin{eqnarray}
	r_{z}(t) = \sum^{\infty}_{n = -\infty} \left[\exp\left(\frac{-(z + 2nH -
	z_{0})^{2}}{4D_e\:t}\right) + \exp\left(\frac{-(z + 2nH +
	z_{0})^{2}}{4D_e\:t}\right)\right]
\end{eqnarray}

Where $n$ is the number of image sources, $x$ [m], $y$ [m] and $z$ [m] are the
coordinates of the location which is being interrogated. $x_0$ [m], $y_0$ [m]
and $z_0$ [m] are the coordinates of the source and $L$ [m], $L$ [m] and $H$ [m]
are the length, width and height of the room. 

\subsection{Constant and continuous release}\label{sec:EddyCont}

The equation for concentration, $C_{cont}(t)$
[\SI{}{\kilo\gram\per\meter\cubed}], resulting in a cuboid bounded space
\cite{cheng11}. 
\begin{equation}\label{eq:modelCont}
	C_{cont}(t) = \int^{t}_0  \frac{S\: \exp(-\lambda_f\:t)}{8(\pi\:D_e\:t)^{\frac{3}{2}}} r_{x}(t) r_{y}(t) r_{z}(t)\:dt
\end{equation}

\subsection{Constant release rate with finite duration}\label{sec:EddyFinite}

The equation for concentration, $C_{finite}(t)$
[\SI{}{\kilo\gram\per\meter\cubed}], resulting from a finite duration point
release in a cuboid bounded space \cite{foat20},
\begin{equation}\label{eq:modelFiniteDuration}
	C_{finite}(t) = 
	\begin{cases} 
		C_{cont}(t)															& (t \leq t_{end}) \\
		C_{cont}(t) - C_{cont}(t - t_{end})			& (t > t_{end})
	\end{cases} 
\end{equation}

\section{Equations to calculate the eddy diffusion coefficient}\label{app:tkeb}

The turbulent kinetic energy balance (TKEB) relationship to calculate $D_e$ is
given below. There are three equations as there is some uncertainty over what
what value $D_e$ should take. The upper prediction interval (PI) equation gives
the upper value for $D_e$, the lower PI equation gives the lower value and the
regression equation gives the mid-point value \cite{foat20}. 
\begin{equation}\label{eq:karlUpper}
	D_e(\text{upper PI}) = 0.827 \frac{Q}{\sqrt[3]{V\:N^2}} + 0.0565\:\frac{\text{m}^2}{\text{s}},
\end{equation}
\begin{equation}\label{eq:karlRegression}
	D_e(\text{regression}) = 0.824 \frac{Q}{\sqrt[3]{V\:N^2}},
\end{equation}
\begin{equation}\label{eq:karlLower}
	D_e(\text{lower PI}) = 0.822 \frac{Q}{\sqrt[3]{V\:N^2}} - 0.0565\:\frac{\text{m}^2}{\text{s}},
\end{equation}
where $Q$ [\SI{}{\meter\cubed\per\second}] is the total supply flow rate and $N$
is the number of supply vents. A lower bound for $D_e$ should be applied when
using these equations, which is \SI{1e-3}{\meter\squared\per\second}. 

\section{Time to Well Mixed}\label{app:timetowellmixed}
The equation used to calculate the time taken for the room to become well mixed,
in the case of the Eddy Diffusion model is \cite{drescher95}
\begin{equation}
    t_{\text{wm}}=\frac{\sigma_{c}}{\mu_{c}} \leq 0.1
\end{equation}

\noindent where $\sigma_{c}$ is the standard deviation of the conentration over
the domain, and $\mu_{c}$ is the spatially averaged conentration over the
domain.

\section{Upper Exposure Limit}\label{app:upperexpolimit}
In the case of an instantaneous or finite duration release, an upper limit of
the exposure due to each source can be computed as follows \cite{parker16}
\begin{equation}
    E_{\text{upper}} = \frac{M}{Q_{f}}
\end{equation}

\noindent where $M$ is the total mass released over the lifetime of the source
and $Q_f$ is the fresh air change rate.

\section{Steady State Well Mixed Concentration}\label{app:steadystate}
For an instantaneous source the steady state well mixed concentration is
computed in the following way, assuming that $\lambda_{f} = 0$,
\begin{equation}
    C_{\text{steady}} = \frac{M}{V}
\end{equation}

\noindent For a fixed duration source, assuming that $\lambda_{f}\neq 0$, 
\begin{equation}
    C_{\text{steady}} = \frac{M}{Q_{f}}
\end{equation}

\section{Characteristic Diffusion Time}\label{app:chardifftime}
The characteristic diffusion time for a given diffusion coefficient is given by 
\begin{equation}
    t_{\text{diff}} = \frac{L_{\text{char}}^{2}}{D_{e}}
\end{equation}

\noindent for $L_{\text{char}} = L, W, H, \text{ and }, V^{\frac{1}{3}}$\

\begin{thebibliography}{10}
    \bibitem{drivas96} Drivas \emph{et al.}, \emph{Modeling indoor air exposure from
    short-term point source releases}, Indoor Air \textbf{6}
271-277 (1996)
\bibitem{cheng11} Cheng \emph{et al.}, \emph{Modeling exposure close to air pollution
sources in naturally ventilated residences: Association of turbulent diffusion
coffcient with air change rate}, Environ. Sci. Technol. \textbf{45} 9
4016-4022 (2011)
    \bibitem{drescher95} A.C. Drescher \emph{et al.}, \emph{Mixing of a point-source
    indoor pollutant by forced convection}, Indoor Air \textbf{5}
    204-214 (1995).
    \bibitem{foat20} T. Foat \emph{et al.} \emph{A relationship for the diffusion coefficient
    in eddy diffusion based indoor dispersion modelling}, Building and
    Environment \textbf{169} 106591 (2020) 
    \bibitem{parker16} Parker, S., \emph{et al.}, \emph{Visual assessment
    of contaminant impacts in multizone buildings}. Building and Environment,
    \textbf{102}, 39-53 (2016).  
    
    \bibitem{keil09} C.B. Keil \emph{et al.}, \emph{Mathematical Models for Estimating
Occupational Exposure to Chemicals}, AIHA, Fairfax, VA, 2009.
\end{thebibliography}

\end{document}